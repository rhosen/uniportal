@page
@model UniPortal.Pages.Account.PasswordModel
@{
    ViewData["Title"] = "Change Password";
    Layout = "_StudentLayout"; // or _FacultyLayout/_AdminLayout depending on role
}
@if (TempData["Message"] != null)
{
    <div class="alert alert-success alert-dismissible fade show" role="alert">
        @TempData["Message"]
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>
}

@if (!ViewData.ModelState.IsValid)
{
    <div class="alert alert-danger alert-dismissible fade show" role="alert">
        @foreach (var error in ViewData.ModelState.Values.SelectMany(v => v.Errors))
        {
            <div>@error.ErrorMessage</div>
        }
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>
}

<div class="row d-flex justify-content-center mb-4">
    <div class="col-12 col-lg-6 text-center">
        <h6 class="fw-bold text-primary">🔑 Change Your Password</h6>
        <p class="text-muted small mb-0">
            For your account security, please choose a strong password.
        </p>
    </div>
</div>

<div class="row g-4 justify-content-center" style="max-width: 40%; margin: 0 auto;">
    <div class="col-12">
        <div class="shadow rounded-4 overflow-hidden bg-white p-4 p-md-5 h-100">
            <form method="post" asp-page-handler="ChangePassword">
                <!-- Current Password -->
                <div class="mb-3">
                    <label class="form-label small fw-semibold">Current Password</label>
                    <input asp-for="CurrentPassword" type="password" class="form-control form-control-sm rounded-3" placeholder="Enter current password" />
                </div>

                <!-- New Password -->
                <div class="mb-3">
                    <label class="form-label small fw-semibold">New Password</label>
                    <input asp-for="NewPassword" type="password" class="form-control form-control-sm rounded-3" placeholder="Enter new password" />
                </div>

                <!-- Confirm Password -->
                <div class="mb-3">
                    <label class="form-label small fw-semibold">Confirm New Password</label>
                    <input asp-for="ConfirmPassword" type="password" class="form-control form-control-sm rounded-3" placeholder="Re-enter new password" />
                </div>

                <button type="submit" class="btn btn-primary w-100 fw-semibold btn-sm mt-4">
                    Save New Password
                </button>
            </form>

            <p class="text-muted small mt-3 mb-0">
                💡 Your new password will take effect immediately after saving.
            </p>
        </div>
    </div>
</div>
